import {
  ConvexProviderWithAuth
} from "./chunk-YHU5VXVG.js";
import "./chunk-XCOK6KLN.js";
import "./chunk-PJEEZAML.js";
import {
  require_react
} from "./chunk-DRWLMN53.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/convex/dist/esm/react-clerk/ConvexProviderWithClerk.js
var import_react = __toESM(require_react(), 1);
var import_react2 = __toESM(require_react(), 1);
function ConvexProviderWithClerk({
  children,
  client,
  useAuth
}) {
  const useAuthFromClerk = useUseAuthFromClerk(useAuth);
  return import_react.default.createElement(ConvexProviderWithAuth, { client, useAuth: useAuthFromClerk }, children);
}
function useUseAuthFromClerk(useAuth) {
  return (0, import_react2.useMemo)(
    () => function useAuthFromClerk() {
      const { isLoaded, isSignedIn, getToken } = useAuth();
      const fetchAccessToken = (0, import_react2.useCallback)(
        async ({ forceRefreshToken }) => {
          try {
            return getToken({
              template: "convex",
              skipCache: forceRefreshToken
            });
          } catch (error) {
            return null;
          }
        },
        // Clerk is not memoizing its getToken function at all
        // eslint-disable-next-line react-hooks/exhaustive-deps
        []
      );
      return (0, import_react2.useMemo)(
        () => ({
          isLoading: !isLoaded,
          isAuthenticated: isSignedIn ?? false,
          fetchAccessToken
        }),
        [isLoaded, isSignedIn, fetchAccessToken]
      );
    },
    [useAuth]
  );
}
export {
  ConvexProviderWithClerk
};
//# sourceMappingURL=convex_react-clerk.js.map
